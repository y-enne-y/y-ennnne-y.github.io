<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Schedule</title>

    <meta property="og:title" content="나의 시간표 & 친구 상태">
    <meta property="og:description" content="나와 친구들의 시간표를 확인하고 현재 상태를 실시간으로 알아보세요.">
    <meta property="og:image" content="https://yenney.kr/logo.png">
    <meta property="og:url" content="https://yenney.kr/class-schedule.html">
    <meta property="og:type" content="website">
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css');

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, 'Helvetica Neue', 'Segoe UI', 'Apple SD Gothic Neo', 'Noto Sans KR', 'Malgun Gothic', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif;
            background-color: #f8f9fa;
            color: #343a40;
            margin: 0;
            padding: 10px;
            box-sizing: border-box;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .schedule-container {
            width: 100%;
            max-width: 1200px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            padding: 20px;
            box-sizing: border-box;
            position: relative;
        }

        h1, h2 {
            text-align: center;
            font-weight: 700;
            color: #212529;
        }
        h1 { 
            font-size: 2rem; 
            margin-bottom: 10px; 
            line-height: 1.2;
        }
        h2 { font-size: 1.5rem; margin-top: 40px; margin-bottom: 10px; }

        #my-status-container {
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.1rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Schedule Grid Styles - 정밀한 시간 표현을 위한 10분 단위 그리드 */
        .schedule-grid {
            display: grid;
            grid-template-columns: 60px repeat(5, 1fr); /* 시간 + 월~금 */
            /* Rows: Header (40px) + Time Slots (08:00 ~ 22:00 = 14시간)
               1시간 = 60px (10분당 10px) -> 총 14 * 6 = 84칸
               grid-template-rows: 40px repeat(84, 10px); 
            */
            grid-template-rows: 40px repeat(84, 1fr); /* 10분 단위 */
            gap: 0; /* 갭을 없애고 border로 구분 */
            border: 1px solid #eee;
            background-color: #fff;
            height: 880px; /* 40 + 84*10 = 880px 높이 고정 */
        }

        .header {
            font-weight: 600;
            font-size: 0.9rem;
            color: #495057;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            border-right: 1px solid #e9ecef;
            grid-row: 1 / 2; /* 헤더는 첫 번째 줄 고정 */
        }
        .header:last-child { border-right: none; }

        .time-slot {
            font-size: 0.75rem;
            color: #868e96;
            text-align: right;
            padding-right: 8px;
            grid-column: 1;
            border-right: 1px solid #e9ecef;
            border-bottom: 1px solid #f1f3f5; /* 1시간마다 구분선 */
            display: flex;
            align-items: flex-start; /* 시간 텍스트를 위쪽 정렬 */
            justify-content: flex-end;
            padding-top: 2px;
        }
        
        /* 1시간 단위 구분선 (가로) */
        .grid-line-hour {
            grid-column: 2 / -1;
            border-bottom: 1px solid #e9ecef;
        }
        /* 30분 단위 보조선 (선택사항, 여기선 생략하거나 연하게) */
        
        /* 세로 구분선 (요일별) */
        .day-column-line {
            grid-row: 2 / -1;
            border-right: 1px solid #f1f3f5;
            pointer-events: none; /* 클릭 방해 안 되게 */
        }

        .class-item {
            padding: 4px;
            border-radius: 4px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            color: white;
            overflow: hidden;
            margin: 1px; /* 약간의 여백 */
            z-index: 2; /* 구분선 위에 표시 */
            white-space: normal;
            line-height: 1.2;
            text-align: center;
            font-size: 0.75rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .class-item span { display: block; }
        .class-title { font-weight: 700; margin-bottom: 2px; font-size: 0.8rem; }
        .class-time, .class-location { font-size: 0.7rem; opacity: 0.95; }

        /* Colors */
        .color-1 { background-color: #ff6b6b; } .color-2 { background-color: #faa2c1; }
        .color-3 { background-color: #51cf66; } .color-4 { background-color: #4dabf7; }
        .color-5 { background-color: #cc5de8; } .color-6 { background-color: #20c997; }
        .color-7 { background-color: #fcc419; } .color-8 { background-color: #ff922b; }
        .color-gray { background-color: #adb5bd; }

        #friend-status-container {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #dee2e6;
        }
        #current-time {
            text-align: center;
            color: #868e96;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }
        #friend-list {
            list-style: none;
            padding: 0;
            max-width: 600px;
            margin: 0 auto;
        }
        #friend-list li {
            display: flex;
            align-items: center;
            padding: 12px 10px;
            font-size: 1.1rem;
            border-bottom: 1px solid #f1f3f5;
            cursor: pointer;
            border-radius: 8px;
            transition: background-color 0.2s;
        }
        #friend-list li:hover {
            background-color: #f1f3f5;
        }
        .status-icon {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 12px;
            flex-shrink: 0;
        }
        .status-icon.occupied { background-color: #e5383b; }
        .status-icon.available { background-color: #40c057; }
        .friend-name { font-weight: 500; }
        .schedule-details { margin-left: 8px; font-size: 0.9rem; color: #6c757d; }

        .back-link {
            display: block;
            text-align: center;
            margin-top: 40px;
            font-size: 0.9rem;
            color: #6c757d;
            text-decoration: none;
            font-weight: 500;
        }
        .back-link:hover { text-decoration: underline; }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-overlay.active { display: flex; }
        .modal-content {
            background-color: white;
            width: 95%;
            max-width: 1000px;
            max-height: 95vh;
            overflow-y: auto;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            position: relative;
        }
        .modal-close {
            position: absolute;
            top: 15px; right: 20px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #868e96;
        }
        .modal-header { text-align: center; margin-bottom: 20px; }
        .modal-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 5px; }
        .modal-time { font-size: 1rem; color: #007bff; font-weight: 500; }

        @media (max-width: 768px) {
            h1 { font-size: 1.6rem; }
            .schedule-grid {
                grid-template-columns: 40px repeat(5, 1fr);
                /* 모바일에서도 비율 유지하거나 높이 조정 가능 */
            }
            .class-item { padding: 2px; font-size: 0.7rem; }
            .class-title { font-size: 0.7rem; }
            .class-time, .class-location { display: none; } /* 공간 부족시 숨김 */
        }
    </style>
</head>
<body>

    <div class="schedule-container">
        <h1>My Class Schedule<br><span style="font-size: 1.2rem; font-weight: 400;">(2025-2)</span></h1>
        
        <div id="my-status-container">
            <span class="status-icon" id="my-status-icon"></span>
            <span class="friend-name">Yenney</span>
            <span class="schedule-details" id="my-schedule-details"></span>
        </div>

        <!-- Main Schedule (Yenney) -->
        <div class="schedule-grid" id="my-schedule-grid"></div>

        <div id="friend-status-container">
            <h2>Friends Status</h2>
            <div id="current-time"></div>
            <p style="text-align: center; font-size: 0.8rem; color: #adb5bd; margin-bottom: 15px;">(친구 이름을 클릭하면 시간표를 볼 수 있어요)</p>
            <ul id="friend-list"></ul>
        </div>
        
        <a href="about.html" class="back-link">← Back to About Me</a>
    </div>

    <!-- Modal Structure -->
    <div class="modal-overlay" id="schedule-modal">
        <div class="modal-content">
            <span class="modal-close" id="modal-close-btn">&times;</span>
            <div class="modal-header">
                <div class="modal-title" id="modal-friend-name"></div>
                <div class="modal-time" id="modal-friend-time"></div>
            </div>
            <div class="schedule-grid" id="modal-schedule-grid"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Data Definitions (All Timezone aware) ---
            const myScheduleData = {
                name: 'Yenney',
                schedule: [
                    { subject: '공업분석화학', day: 1, start: '09:00', end: '11:00', location: '석산홀' }, 
                    { subject: '생애주기영양학', day: 1, start: '12:00', end: '14:00', location: '삼508' }, 
                    { subject: '영양소대사', day: 1, start: '14:00', end: '15:00', location: '삼508' }, 
                    { subject: '영양교육및상담', day: 1, start: '15:00', end: '17:00', location: '삼508' }, 
                    { subject: '학회', day: 1, start: '18:00', end: '20:00', location: '삼성관' }, 
                    { subject: '공업분석화학', day: 2, start: '10:00', end: '11:00', location: '석산홀' }, 
                    { subject: '영양생리학', day: 2, start: '11:00', end: '12:00', location: '삼508' }, 
                    { subject: '생애주기영양학', day: 2, start: '13:00', end: '14:00', location: '삼508' }, 
                    { subject: '영양소대사', day: 2, start: '14:00', end: '16:00', location: '삼508' }, 
                    { subject: '영양교육및상담', day: 3, start: '11:00', end: '12:00', location: '삼508' }, 
                    { subject: '촉매공학', day: 3, start: '14:00', end: '15:00', location: '공D507' }, 
                    { subject: '주짓수', day: 3, start: '17:00', end: '18:00', location: '체육관' }, 
                    { subject: '자원봉사', day: 4, start: '09:00', end: '12:00', location: '세브란스' }, 
                    { subject: '영양생리학', day: 4, start: '13:00', end: '15:00', location: '삼508' }, 
                    { subject: '촉매공학', day: 5, start: '10:00', end: '12:00', location: '공D507' }
                ]
            };

            const friendsData = [
                {
                    name: 'PAWAN',
                    timezone: 5.5, 
                    schedule: [
                        { subject: 'TCS-302', day: 1, start: '08:00', end: '09:50', location: 'LT-15' }, { subject: 'PCS-302 Lab', day: 1, start: '10:10', end: '12:00', location: 'Digi Lab-1' }, 
                        { subject: 'TCS-307', day: 2, start: '08:55', end: '09:50', location: 'CR-6' }, { subject: 'PCS-302 Lab', day: 2, start: '10:10', end: '12:00', location: 'Digi Lab-1' }, { subject: 'TCS-308', day: 2, start: '12:55', end: '13:50', location: 'LT-5' }, { subject: 'Elective', day: 2, start: '13:50', end: '14:45', location: '' }, { subject: 'Elective', day: 2, start: '15:05', end: '16:00', location: '' }, 
                        { subject: 'TCS-302', day: 3, start: '08:00', end: '09:50', location: 'LT-15' }, { subject: 'PCS-308 Lab', day: 3, start: '10:10', end: '12:00', location: 'Lab-1' }, { subject: 'TCS-308', day: 3, start: '12:55', end: '13:50', location: 'LT-2' }, { subject: 'TMA-316', day: 3, start: '13:50', end: '14:45', location: 'LT-2' }, { subject: 'TMA-316', day: 3, start: '15:05', end: '16:00', location: 'LT-2' }, 
                        { subject: 'TCS-307', day: 4, start: '08:55', end: '09:50', location: 'LT-2' }, { subject: 'PCS-308 Lab', day: 4, start: '10:10', end: '12:00', location: 'Lab-1' }, { subject: 'TCS-308', day: 4, start: '12:55', end: '13:50', location: 'CR-7' }, { subject: 'Elective', day: 4, start: '13:50', end: '14:45', location: '' }, { subject: 'Elective', day: 4, start: '15:05', end: '16:00', location: '' }, 
                        { subject: 'TMA-316', day: 5, start: '08:00', end: '08:55', location: 'LT-2' }, { subject: 'TCS-308', day: 5, start: '08:55', end: '09:50', location: 'LT-2' }, { subject: 'XCS-301', day: 5, start: '10:10', end: '11:05', location: 'LT-6' }, { subject: 'Career Skills', day: 5, start: '11:05', end: '12:00', location: 'LT-2' },
                        { subject: 'Career Skills', day: 6, start: '10:10', end: '11:05', location: 'LT-5' }, { subject: 'TCS-307', day: 6, start: '11:05', end: '12:55', location: 'CR-7' }
                    ]
                },
                {
                    name: 'YAP CHI KEAT',
                    timezone: 9, 
                    schedule: [
                        { subject: '생애주기영양학', day: 1, start: '12:00', end: '14:00', location: '삼508' }, { subject: '유전학분석', day: 1, start: '15:00', end: '17:00', location: '대별B102' }, 
                        { subject: 'ENGLISH', day: 2, start: '09:00', end: '10:00', location: '' }, { subject: '영양생리학', day: 2, start: '11:00', end: '12:00', location: '삼508' }, { subject: '생애주기영양학', day: 2, start: '13:00', end: '14:00', location: '삼508' }, { subject: '인간관계', day: 2, start: '14:00', end: '15:00', location: '' }, { subject: '식품학', day: 2, start: '16:00', end: '18:00', location: '삼508' }, 
                        { subject: '유전학분석', day: 3, start: '11:00', end: '12:00', location: '대별B102' }, 
                        { subject: 'ENG SPEAKING', day: 4, start: '10:00', end: '12:00', location: '' }, { subject: '식품학', day: 4, start: '12:00', end: '13:00', location: '삼508' }, { subject: '영양생리학', day: 4, start: '13:00', end: '15:00', location: '삼508' }, 
                        { subject: 'GOSC', day: 5, start: '09:00', end: '12:00', location: '글로벌' }, { subject: 'GOSC', day: 5, start: '13:00', end: '18:00', location: '글로벌' }
                    ]
                },
                {
                    name: 'NYAN LINN',
                    timezone: 9,
                    schedule: [
                        { subject: '동물생리학', day: 1, start: '10:00', end: '12:00', location: '과B103' }, { subject: '생애주기영양학', day: 1, start: '12:00', end: '14:00', location: '삼508' }, 
                        { subject: '글쓰기', day: 2, start: '12:00', end: '13:00', location: '백S206' }, { subject: '생애주기영양학', day: 2, start: '13:00', end: '14:00', location: '삼508' }, { subject: '식품학', day: 2, start: '16:00', end: '18:00', location: '삼508' }, 
                        { subject: '동물생리학', day: 3, start: '10:00', end: '11:00', location: '과B103' }, 
                        { subject: '식품학', day: 4, start: '12:00', end: '13:00', location: '삼508' }, { subject: '글쓰기', day: 4, start: '13:00', end: '15:00', location: '백S206' }
                    ]
                },
                {
                    name: '강예승',
                    timezone: 9,
                    schedule: [
                        { subject: '환경계획', day: 1, start: '12:00', end: '13:30', location: '생254' }, { subject: '알바', day: 1, start: '16:15', end: '21:15', location: '학원' }, 
                        { subject: '지속가능지역', day: 2, start: '09:00', end: '12:00', location: '생253' }, { subject: '창조적사고', day: 2, start: '12:00', end: '15:00', location: '산학211' }, 
                        { subject: '조경종합설계', day: 3, start: '09:00', end: '13:00', location: '동801' }, { subject: '환경계획', day: 3, start: '13:30', end: '15:00', location: '생254' }, { subject: '알바', day: 3, start: '16:15', end: '21:15', location: '학원' }, 
                        { subject: '조경적산학', day: 4, start: '12:00', end: '15:00', location: '생455' }, { subject: '조경식물관리', day: 4, start: '15:00', end: '18:00', location: '생455' }, 
                        { subject: '알바', day: 5, start: '16:15', end: '21:15', location: '학원' }, 
                        { subject: '알바', day: 0, start: '15:00', end: '21:30', location: '알바' }
                    ]
                },
                {
                    name: '강예림',
                    timezone: 9,
                    schedule: [
                        { subject: '본초학총론', day: 1, start: '09:00', end: '12:00', location: '' }, { subject: '약학개론', day: 1, start: '14:30', end: '16:00', location: '' }, 
                        { subject: '약용식물학2', day: 2, start: '10:00', end: '12:00', location: '' }, { subject: '병태생리학', day: 2, start: '13:00', end: '15:00', location: '' }, { subject: '생화학2', day: 2, start: '15:00', end: '17:00', location: '' }, { subject: '운동', day: 2, start: '18:00', end: '20:00', location: '' }, 
                        { subject: '한방병리학', day: 3, start: '10:00', end: '11:00', location: '' }, { subject: '병원미생물학', day: 3, start: '11:00', end: '13:00', location: '' }, { subject: '분석학', day: 3, start: '15:00', end: '19:00', location: '' }, 
                        { subject: '유기약화학1', day: 4, start: '11:00', end: '13:00', location: '' }, { subject: '생화학2', day: 4, start: '16:00', end: '17:00', location: '' }, { subject: '운동', day: 4, start: '18:00', end: '20:00', location: '' }, 
                        { subject: '한방병리학', day: 5, start: '09:00', end: '11:00', location: '' }, { subject: '한의약용어', day: 5, start: '11:00', end: '13:00', location: '' }, { subject: '천연물소재', day: 5, start: '16:00', end: '19:00', location: '' }
                    ]
                }
            ];

            // --- Helper Functions ---
            
            // 10분 단위 그리드 생성
            function createGridHTML() {
                let html = `
                    <div class="header">Time</div>
                    <div class="header">Mon</div><div class="header">Tue</div><div class="header">Wed</div>
                    <div class="header">Thu</div><div class="header">Fri</div>
                `;
                
                // 08:00 부터 22:00 까지 (14시간)
                const startHour = 8;
                const endHour = 22;
                
                for (let h = startHour; h < endHour; h++) {
                    // 시간 표시 (정각)
                    const timeLabel = h.toString().padStart(2, '0') + ":00";
                    
                    // 각 시간의 시작점 (row index)
                    // Header(1행) + (h - 8) * 6(10분단위) + 1(현재 줄)
                    const rowIndex = 1 + (h - startHour) * 6 + 1;
                    
                    // 시간 라벨 (6칸 통합)
                    html += `<div class="time-slot" style="grid-row: ${rowIndex} / span 6;">${timeLabel}</div>`;
                    
                    // 가로 구분선 (1시간 단위)
                    html += `<div class="grid-line-hour" style="grid-row: ${rowIndex};"></div>`;
                    
                    // 요일별 세로 구분선 (5개 요일)
                    for(let d=1; d<=5; d++) {
                        html += `<div class="day-column-line" style="grid-column: ${d+1}; grid-row: 2 / -1;"></div>`;
                    }
                }
                return html;
            }

            function renderSchedule(container, scheduleData) {
                container.innerHTML = createGridHTML();
                
                scheduleData.forEach((item, index) => {
                    const [startH, startM] = item.start.split(':').map(Number);
                    const [endH, endM] = item.end.split(':').map(Number);

                    // 10분 단위 그리드 계산
                    // 시작 시간: 08:00 = 2번째 줄 (1번째 줄은 헤더)
                    // 공식: 2 + (시 - 8)*6 + (분 / 10)
                    const gridStartRow = 2 + (startH - 8) * 6 + Math.round(startM / 10);
                    const gridEndRow = 2 + (endH - 8) * 6 + Math.round(endM / 10);

                    // 색상
                    const colorClass = `color-${(index % 8) + 1}`;

                    const div = document.createElement('div');
                    div.className = `class-item ${colorClass}`;
                    // 요일: 월=1 -> grid column 2 (Time이 1)
                    // item.day가 월=1, 화=2... 형식이면 +1
                    // data에서 월=1, 화=2... 로 되어있음 (Date.getDay()와 일치시킴)
                    // 단, Date.getDay()에서 일=0, 월=1... 이므로 데이터의 day값과 grid column 매핑 주의
                    // 여기 데이터는 월=1 ~ 금=5 로 가정하고 +1 해줌. 
                    // (일요일(0) 수업은 평일 시간표에 안 보임, 필요시 조건 추가)
                    if (item.day >= 1 && item.day <= 5) {
                        div.style.gridColumn = item.day + 1; 
                        div.style.gridRow = `${gridStartRow} / ${gridEndRow}`;
                        div.innerHTML = `
                            <span class="class-title">${item.subject}</span>
                            <span class="class-time">${item.start}-${item.end}</span>
                            <span class="class-location">${item.location}</span>
                        `;
                        container.appendChild(div);
                    }
                });
            }

            // ... (나머지 updateStatus, updateAllStatuses, Modal 로직은 동일) ...

            const currentTimeElement = document.getElementById('current-time');
            const myScheduleGrid = document.getElementById('my-schedule-grid');
            const friendList = document.getElementById('friend-list');
            const modal = document.getElementById('schedule-modal');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const modalScheduleGrid = document.getElementById('modal-schedule-grid');
            const modalFriendName = document.getElementById('modal-friend-name');
            const modalFriendTime = document.getElementById('modal-friend-time');

            function updateStatus(personData, comparisonDate, statusIcon, scheduleDetails) {
                const comparisonDay = comparisonDate.getDay();
                const comparisonTime = comparisonDate.getHours().toString().padStart(2, '0') + ':' + comparisonDate.getMinutes().toString().padStart(2, '0');

                let isBusy = false;
                let currentSchedule = null;
                let nextScheduleToday = null;

                const sortedSchedule = [...personData.schedule].sort((a, b) => a.start.localeCompare(b.start));

                for (const event of sortedSchedule) {
                    if (event.day !== comparisonDay) continue;

                    if (comparisonTime >= event.start && comparisonTime < event.end) {
                        isBusy = true;
                        currentSchedule = event;
                        break;
                    }
                    if (event.start > comparisonTime) {
                         if (!nextScheduleToday) {
                             nextScheduleToday = event;
                         }
                    }
                }

                statusIcon.classList.remove('occupied', 'available');

                if (isBusy) {
                    statusIcon.classList.add('occupied');
                    scheduleDetails.textContent = `(Now: ${currentSchedule.subject})`;
                } else {
                    statusIcon.classList.add('available');
                    if (nextScheduleToday) {
                        scheduleDetails.textContent = `(Next: ${nextScheduleToday.start} ${nextScheduleToday.subject})`;
                    } else {
                        scheduleDetails.textContent = '(No more classes)';
                    }
                }
            }

            function updateAllStatuses() {
                const now = new Date();
                const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
                const kstNow = new Date(utc + (9 * 60 * 60 * 1000));

                currentTimeElement.textContent = kstNow.toLocaleString('ko-KR', { timeZone: 'Asia/Seoul', dateStyle: 'full', timeStyle: 'medium' });
                
                updateStatus(myScheduleData, kstNow, document.getElementById('my-status-icon'), document.getElementById('my-schedule-details'));

                friendsData.forEach(friend => {
                    const friendElement = document.querySelector(`li[data-name="${friend.name}"]`);
                    if (!friendElement) return;

                    const friendTime = new Date(utc + (friend.timezone * 60 * 60 * 1000));
                    updateStatus(friend, friendTime, friendElement.querySelector('.status-icon'), friendElement.querySelector('.schedule-details'));
                    
                    if (modal.style.display === 'flex' && modalFriendName.textContent === friend.name) {
                        modalFriendTime.textContent = `Local Time: ${friendTime.toLocaleString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true })}`;
                    }
                });
            }

            function openModal(friendData) {
                modalFriendName.textContent = friendData.name;
                renderSchedule(modalScheduleGrid, friendData.schedule);
                
                const now = new Date();
                const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
                const friendTime = new Date(utc + (friendData.timezone * 60 * 60 * 1000));
                modalFriendTime.textContent = `Local Time: ${friendTime.toLocaleString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true })}`;

                modal.classList.add('active');
            }

            // Initialize
            renderSchedule(myScheduleGrid, myScheduleData.schedule);

            friendsData.forEach(friend => {
                const li = document.createElement('li');
                li.dataset.name = friend.name;
                li.innerHTML = `
                    <span class="status-icon"></span>
                    <span class="friend-name">${friend.name}</span>
                    <span class="schedule-details"></span>
                `;
                li.addEventListener('click', () => openModal(friend));
                friendList.appendChild(li);
            });

            modalCloseBtn.onclick = () => modal.classList.remove('active');
            window.onclick = (event) => {
                if (event.target === modal) modal.classList.remove('active');
            };

            updateAllStatuses();
            setInterval(updateAllStatuses, 1000);
        });
    </script>
</body>
</html>
