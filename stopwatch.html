<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Timestamp Link Generator</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        .section { background-color: #f7f7f7; border: 1px solid #ddd; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        h2 { margin-top: 0; }
        input[type="url"], input[type="text"] { width: 95%; padding: 8px; margin-bottom: 10px; border-radius: 4px; border: 1px solid #ccc; }
        button { padding: 10px 15px; border: none; background-color: #007bff; color: white; border-radius: 4px; cursor: pointer; margin-right: 5px; }
        button:hover { background-color: #0056b3; }
        .stopwatch { margin: 10px 0; padding: 15px; border: 1px solid #ccc; border-radius: 4px; background-color: white; }
        .time-display { font-size: 20px; font-weight: bold; margin-bottom: 10px; }
        #stopwatches-container { max-height: 300px; overflow-y: auto; }
    </style>
</head>
<body>

<div class="container">
    <div class="section">
        <h2>1. Generate YouTube Timestamp Link</h2>
        <input type="url" id="youtube-url" placeholder="Paste YouTube URL here (e.g., https://www.youtube.com/watch?v=...)">
        <div>
            <input type="text" id="minutes" placeholder="Minutes" style="width: 100px;">
            <input type="text" id="seconds" placeholder="Seconds" style="width: 100px;">
        </div>
        <button onclick="generateTimestampLink()">Generate Link</button>
        <hr>
        <input type="text" id="generated-link" placeholder="Your timestamped link will appear here" readonly>
        <button id="copy-button" onclick="copyLink()">Copy</button>
    </div>

    <div class="section">
        <h2>2. Use Stopwatch to Find Time</h2>
        <button onclick="addStopwatch()">Add Stopwatch</button>
        <div id="stopwatches-container">
            </div>
    </div>
</div>

<script>
    function generateTimestampLink() {
        const urlInput = document.getElementById('youtube-url').value;
        const minutes = parseInt(document.getElementById('minutes').value) || 0;
        const seconds = parseInt(document.getElementById('seconds').value) || 0;
        const outputField = document.getElementById('generated-link');
        const copyButton = document.getElementById('copy-button');

        if (!urlInput) {
            alert('Please enter a YouTube URL.');
            return;
        }

        const videoId = getVideoId(urlInput);
        if (!videoId) {
            alert('Invalid YouTube URL. Could not find Video ID.');
            return;
        }

        const totalSeconds = (minutes * 60) + seconds;
        const newUrl = `https://youtu.be/${videoId}?t=${totalSeconds}`;
        
        outputField.value = newUrl;
        copyButton.textContent = 'Copy';
    }

    function getVideoId(url) {
        const regex = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
        const match = url.match(regex);
        return match ? match[1] : null;
    }

    function copyLink() {
        const linkField = document.getElementById('generated-link');
        if (linkField.value) {
            navigator.clipboard.writeText(linkField.value).then(() => {
                const copyButton = document.getElementById('copy-button');
                copyButton.textContent = 'Copied!';
            }).catch(err => {
                alert('Failed to copy link.');
            });
        }
    }

    function formatTime(ms) {
        const totalSeconds = Math.floor(ms / 1000);
        const hours = String(Math.floor(totalSeconds / 3600)).padStart(2, '0');
        const minutes = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, '0');
        const seconds = String(totalSeconds % 60).padStart(2, '0');
        return `${hours}:${minutes}:${seconds}`;
    }
    
    function addStopwatch() {
        const container = document.getElementById("stopwatches-container");
        const stopwatchDiv = document.createElement("div");
        stopwatchDiv.className = "stopwatch";
        const timeDisplay = document.createElement("div");
        timeDisplay.className = "time-display";
        timeDisplay.textContent = "00:00:00";
        const startButton = document.createElement("button");
        startButton.textContent = "Start";
        const stopButton = document.createElement("button");
        stopButton.textContent = "Stop";
        const resetButton = document.createElement("button");
        resetButton.textContent = "Reset";
        const useTimeButton = document.createElement("button");
        useTimeButton.textContent = "Use this time";
        useTimeButton.style.backgroundColor = "#28a745";
        let startTime, intervalId, elapsedTime = 0, running = false;
        startButton.onclick = () => { if (!running) { startTime = Date.now() - elapsedTime; intervalId = setInterval(() => { elapsedTime = Date.now() - startTime; timeDisplay.textContent = formatTime(elapsedTime).split('.')[0]; }, 100); running = true; } };
        stopButton.onclick = () => { clearInterval(intervalId); running = false; };
        resetButton.onclick = () => { clearInterval(intervalId); elapsedTime = 0; timeDisplay.textContent = "00:00:00"; running = false; };
        useTimeButton.onclick = () => { const totalSeconds = Math.floor(elapsedTime / 1000); const minutes = Math.floor((totalSeconds % 3600) / 60); const seconds = totalSeconds % 60; document.getElementById('minutes').value = minutes; document.getElementById('seconds').value = seconds; };
        stopwatchDiv.appendChild(timeDisplay);
        stopwatchDiv.appendChild(startButton);
        stopwatchDiv.appendChild(stopButton);
        stopwatchDiv.appendChild(resetButton);
        stopwatchDiv.appendChild(useTimeButton);
        container.appendChild(stopwatchDiv);
    }
</script>

</body>
</html>
